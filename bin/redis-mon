#!/usr/bin/env php
<?php
$autoloader = dirname(__DIR__) . '/vendor/.composer/autoload.php';
if (!file_exists($autoloader)) {
    echo "Please run 'php composer.phar install'." . PHP_EOL;
    exit(1);
}
require_once $autoloader;

use \Lagged\RedisMon\Config;
use \Lagged\RedisMon;

/**
 * @desc Include -dist file if no 'local' configuration exists.
 */
$configFile = dirname(__DIR__) . '/etc/redis-mon.ini';
if (!file_exists($configFile)) {
    $configFile .= '-dist';
}

$config = new Config($configFile);
$config->setEnvironment('production')->parse();

$monitor = new RedisMon($config);
var_dump($monitor->stats());
